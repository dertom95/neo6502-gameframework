ca65 V2.18 - Ubuntu 2.19-1
Main file   : 6502_func_call.s
Current file: 6502_func_call.s

000000r 1               ;
000000r 1               ; File generated by cc65 v 2.18 - Ubuntu 2.19-1
000000r 1               ;
000000r 1               	.fopt		compiler,"cc65 v 2.18 - Ubuntu 2.19-1"
000000r 1               	.setcpu		"6502"
000000r 1               	.smart		on
000000r 1               	.autoimport	on
000000r 1               	.case		on
000000r 1               	.debuginfo	off
000000r 1               	.importzp	sp, sreg, regsave, regbank
000000r 1               	.importzp	tmp1, tmp2, tmp3, tmp4, ptr1, ptr2, ptr3, ptr4
000000r 1               	.macpack	longbranch
000000r 2               .macro  jeq     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                       bne     *+5
000000r 2                       jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               beq     Target
000000r 2                       .else
000000r 2                               bne     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jne     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               beq     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bne     Target
000000r 2                       .else
000000r 2                               beq     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jmi     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               bpl     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bmi     Target
000000r 2                       .else
000000r 2                               bpl     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jpl     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               bmi     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bpl     Target
000000r 2                       .else
000000r 2                               bmi     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jcs     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               bcc     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bcs     Target
000000r 2                       .else
000000r 2                               bcc     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jcc     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               bcs     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bcc     Target
000000r 2                       .else
000000r 2                               bcs     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jvs     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               bvc     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bvs     Target
000000r 2                       .else
000000r 2                               bvc     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               .macro  jvc     Target
000000r 2                       .if     .match(Target, 0)
000000r 2                               bvs     *+5
000000r 2                               jmp     Target
000000r 2                       .elseif .def(Target) .and .const((*-2)-(Target)) .and ((*+2)-(Target) <= 127)
000000r 2                               bvc     Target
000000r 2                       .else
000000r 2                               bvs     *+5
000000r 2                               jmp     Target
000000r 2                       .endif
000000r 2               .endmacro
000000r 2               
000000r 1               	.forceimport	__STARTUP__
000000r 1               	.export		_change_palette
000000r 1               	.export		_get_pixel
000000r 1               	.export		_draw_pixel
000000r 1               	.export		_draw_char
000000r 1               	.export		_main
000000r 1               
000000r 1               ; ---------------------------------------------------------------
000000r 1               ; void __near__ change_palette (unsigned char)
000000r 1               ; ---------------------------------------------------------------
000000r 1               
000000r 1               .segment	"CODE"
000000r 1               
000000r 1               .proc	_change_palette: near
000000r 1               
000000r 1               .segment	"CODE"
000000r 1               
000000r 1  20 rr rr     	jsr     pusha
000003r 1  20 rr rr     	jsr     decsp5
000006r 1  A0 03        	ldy     #$03
000008r 1  A9 08        	lda     #$08
00000Ar 1  91 rr        	sta     (sp),y
00000Cr 1  A9 F0        	lda     #$F0
00000Er 1  C8           	iny
00000Fr 1  91 rr        	sta     (sp),y
000011r 1  A2 F1        	ldx     #$F1
000013r 1  A9 00        	lda     #$00
000015r 1  A0 01        	ldy     #$01
000017r 1  20 rr rr     	jsr     staxysp
00001Ar 1  85 rr        	sta     ptr1
00001Cr 1  86 rr        	stx     ptr1+1
00001Er 1  A9 01        	lda     #$01
000020r 1  A0 00        	ldy     #$00
000022r 1  91 rr        	sta     (ptr1),y
000024r 1  A0 02        	ldy     #$02
000026r 1  B1 rr        	lda     (sp),y
000028r 1  85 rr        	sta     ptr1+1
00002Ar 1  88           	dey
00002Br 1  B1 rr        	lda     (sp),y
00002Dr 1  85 rr        	sta     ptr1
00002Fr 1  A0 05        	ldy     #$05
000031r 1  B1 rr        	lda     (sp),y
000033r 1  A0 01        	ldy     #$01
000035r 1  91 rr        	sta     (ptr1),y
000037r 1  C8           	iny
000038r 1  B1 rr        	lda     (sp),y
00003Ar 1  85 rr        	sta     ptr1+1
00003Cr 1  88           	dey
00003Dr 1  B1 rr        	lda     (sp),y
00003Fr 1  85 rr        	sta     ptr1
000041r 1  A9 02        	lda     #$02
000043r 1  C8           	iny
000044r 1  91 rr        	sta     (ptr1),y
000046r 1  A0 04        	ldy     #$04
000048r 1  B1 rr        	lda     (sp),y
00004Ar 1  85 rr        	sta     ptr1+1
00004Cr 1  88           	dey
00004Dr 1  B1 rr        	lda     (sp),y
00004Fr 1  85 rr        	sta     ptr1
000051r 1  A0 00        	ldy     #$00
000053r 1  B1 rr        	lda     (ptr1),y
000055r 1  91 rr        	sta     (sp),y
000057r 1  4C rr rr     	jmp     incsp6
00005Ar 1               
00005Ar 1               .endproc
00005Ar 1               
00005Ar 1               ; ---------------------------------------------------------------
00005Ar 1               ; unsigned char __near__ get_pixel (unsigned int, unsigned int)
00005Ar 1               ; ---------------------------------------------------------------
00005Ar 1               
00005Ar 1               .segment	"CODE"
00005Ar 1               
00005Ar 1               .proc	_get_pixel: near
00005Ar 1               
00005Ar 1               .segment	"CODE"
00005Ar 1               
00005Ar 1  20 rr rr     	jsr     pushax
00005Dr 1  20 rr rr     	jsr     decsp5
000060r 1  A0 03        	ldy     #$03
000062r 1  A9 08        	lda     #$08
000064r 1  91 rr        	sta     (sp),y
000066r 1  A9 F0        	lda     #$F0
000068r 1  C8           	iny
000069r 1  91 rr        	sta     (sp),y
00006Br 1  A2 F1        	ldx     #$F1
00006Dr 1  A9 00        	lda     #$00
00006Fr 1  A0 01        	ldy     #$01
000071r 1  20 rr rr     	jsr     staxysp
000074r 1  85 rr        	sta     ptr1
000076r 1  86 rr        	stx     ptr1+1
000078r 1  A9 02        	lda     #$02
00007Ar 1  A0 00        	ldy     #$00
00007Cr 1  91 rr        	sta     (ptr1),y
00007Er 1  A8           	tay
00007Fr 1  B1 rr        	lda     (sp),y
000081r 1  85 rr        	sta     ptr1+1
000083r 1  88           	dey
000084r 1  B1 rr        	lda     (sp),y
000086r 1  85 rr        	sta     ptr1
000088r 1  A0 08        	ldy     #$08
00008Ar 1  B1 rr        	lda     (sp),y
00008Cr 1  AA           	tax
00008Dr 1  88           	dey
00008Er 1  B1 rr        	lda     (sp),y
000090r 1  A0 01        	ldy     #$01
000092r 1  91 rr        	sta     (ptr1),y
000094r 1  C8           	iny
000095r 1  8A           	txa
000096r 1  91 rr        	sta     (ptr1),y
000098r 1  B1 rr        	lda     (sp),y
00009Ar 1  85 rr        	sta     ptr1+1
00009Cr 1  88           	dey
00009Dr 1  B1 rr        	lda     (sp),y
00009Fr 1  85 rr        	sta     ptr1
0000A1r 1  A0 06        	ldy     #$06
0000A3r 1  B1 rr        	lda     (sp),y
0000A5r 1  AA           	tax
0000A6r 1  88           	dey
0000A7r 1  B1 rr        	lda     (sp),y
0000A9r 1  A0 03        	ldy     #$03
0000ABr 1  91 rr        	sta     (ptr1),y
0000ADr 1  C8           	iny
0000AEr 1  8A           	txa
0000AFr 1  91 rr        	sta     (ptr1),y
0000B1r 1  B1 rr        	lda     (sp),y
0000B3r 1  85 rr        	sta     ptr1+1
0000B5r 1  88           	dey
0000B6r 1  B1 rr        	lda     (sp),y
0000B8r 1  85 rr        	sta     ptr1
0000BAr 1  A0 00        	ldy     #$00
0000BCr 1  B1 rr        	lda     (ptr1),y
0000BEr 1  91 rr        	sta     (sp),y
0000C0r 1  A2 00        	ldx     #$00
0000C2r 1  B1 rr        	lda     (sp),y
0000C4r 1  A0 09        	ldy     #$09
0000C6r 1  4C rr rr     	jmp     addysp
0000C9r 1               
0000C9r 1               .endproc
0000C9r 1               
0000C9r 1               ; ---------------------------------------------------------------
0000C9r 1               ; void __near__ draw_pixel (unsigned int, unsigned int, unsigned char)
0000C9r 1               ; ---------------------------------------------------------------
0000C9r 1               
0000C9r 1               .segment	"CODE"
0000C9r 1               
0000C9r 1               .proc	_draw_pixel: near
0000C9r 1               
0000C9r 1               .segment	"CODE"
0000C9r 1               
0000C9r 1  20 rr rr     	jsr     pusha
0000CCr 1  20 rr rr     	jsr     decsp5
0000CFr 1  A0 03        	ldy     #$03
0000D1r 1  A9 08        	lda     #$08
0000D3r 1  91 rr        	sta     (sp),y
0000D5r 1  A9 F0        	lda     #$F0
0000D7r 1  C8           	iny
0000D8r 1  91 rr        	sta     (sp),y
0000DAr 1  A2 F1        	ldx     #$F1
0000DCr 1  A9 00        	lda     #$00
0000DEr 1  A0 01        	ldy     #$01
0000E0r 1  20 rr rr     	jsr     staxysp
0000E3r 1  85 rr        	sta     ptr1
0000E5r 1  86 rr        	stx     ptr1+1
0000E7r 1  A9 03        	lda     #$03
0000E9r 1  A0 00        	ldy     #$00
0000EBr 1  91 rr        	sta     (ptr1),y
0000EDr 1  A0 02        	ldy     #$02
0000EFr 1  B1 rr        	lda     (sp),y
0000F1r 1  85 rr        	sta     ptr1+1
0000F3r 1  88           	dey
0000F4r 1  B1 rr        	lda     (sp),y
0000F6r 1  85 rr        	sta     ptr1
0000F8r 1  A0 09        	ldy     #$09
0000FAr 1  B1 rr        	lda     (sp),y
0000FCr 1  AA           	tax
0000FDr 1  88           	dey
0000FEr 1  B1 rr        	lda     (sp),y
000100r 1  A0 01        	ldy     #$01
000102r 1  91 rr        	sta     (ptr1),y
000104r 1  C8           	iny
000105r 1  8A           	txa
000106r 1  91 rr        	sta     (ptr1),y
000108r 1  B1 rr        	lda     (sp),y
00010Ar 1  85 rr        	sta     ptr1+1
00010Cr 1  88           	dey
00010Dr 1  B1 rr        	lda     (sp),y
00010Fr 1  85 rr        	sta     ptr1
000111r 1  A0 07        	ldy     #$07
000113r 1  B1 rr        	lda     (sp),y
000115r 1  AA           	tax
000116r 1  88           	dey
000117r 1  B1 rr        	lda     (sp),y
000119r 1  A0 03        	ldy     #$03
00011Br 1  91 rr        	sta     (ptr1),y
00011Dr 1  C8           	iny
00011Er 1  8A           	txa
00011Fr 1  91 rr        	sta     (ptr1),y
000121r 1  A0 02        	ldy     #$02
000123r 1  B1 rr        	lda     (sp),y
000125r 1  85 rr        	sta     ptr1+1
000127r 1  88           	dey
000128r 1  B1 rr        	lda     (sp),y
00012Ar 1  85 rr        	sta     ptr1
00012Cr 1  A0 05        	ldy     #$05
00012Er 1  B1 rr        	lda     (sp),y
000130r 1  91 rr        	sta     (ptr1),y
000132r 1  88           	dey
000133r 1  B1 rr        	lda     (sp),y
000135r 1  85 rr        	sta     ptr1+1
000137r 1  88           	dey
000138r 1  B1 rr        	lda     (sp),y
00013Ar 1  85 rr        	sta     ptr1
00013Cr 1  A0 00        	ldy     #$00
00013Er 1  B1 rr        	lda     (ptr1),y
000140r 1  91 rr        	sta     (sp),y
000142r 1  A0 0A        	ldy     #$0A
000144r 1  4C rr rr     	jmp     addysp
000147r 1               
000147r 1               .endproc
000147r 1               
000147r 1               ; ---------------------------------------------------------------
000147r 1               ; void __near__ draw_char (unsigned int, unsigned int, unsigned char, unsigned char)
000147r 1               ; ---------------------------------------------------------------
000147r 1               
000147r 1               .segment	"CODE"
000147r 1               
000147r 1               .proc	_draw_char: near
000147r 1               
000147r 1               .segment	"CODE"
000147r 1               
000147r 1  20 rr rr     	jsr     pusha
00014Ar 1  20 rr rr     	jsr     decsp5
00014Dr 1  A0 03        	ldy     #$03
00014Fr 1  A9 08        	lda     #$08
000151r 1  91 rr        	sta     (sp),y
000153r 1  A9 F0        	lda     #$F0
000155r 1  C8           	iny
000156r 1  91 rr        	sta     (sp),y
000158r 1  A2 F1        	ldx     #$F1
00015Ar 1  A9 00        	lda     #$00
00015Cr 1  A0 01        	ldy     #$01
00015Er 1  20 rr rr     	jsr     staxysp
000161r 1  85 rr        	sta     ptr1
000163r 1  86 rr        	stx     ptr1+1
000165r 1  A9 04        	lda     #$04
000167r 1  A0 00        	ldy     #$00
000169r 1  91 rr        	sta     (ptr1),y
00016Br 1  A0 02        	ldy     #$02
00016Dr 1  B1 rr        	lda     (sp),y
00016Fr 1  85 rr        	sta     ptr1+1
000171r 1  88           	dey
000172r 1  B1 rr        	lda     (sp),y
000174r 1  85 rr        	sta     ptr1
000176r 1  A0 0A        	ldy     #$0A
000178r 1  B1 rr        	lda     (sp),y
00017Ar 1  AA           	tax
00017Br 1  88           	dey
00017Cr 1  B1 rr        	lda     (sp),y
00017Er 1  A0 01        	ldy     #$01
000180r 1  91 rr        	sta     (ptr1),y
000182r 1  C8           	iny
000183r 1  8A           	txa
000184r 1  91 rr        	sta     (ptr1),y
000186r 1  B1 rr        	lda     (sp),y
000188r 1  85 rr        	sta     ptr1+1
00018Ar 1  88           	dey
00018Br 1  B1 rr        	lda     (sp),y
00018Dr 1  85 rr        	sta     ptr1
00018Fr 1  A0 08        	ldy     #$08
000191r 1  B1 rr        	lda     (sp),y
000193r 1  AA           	tax
000194r 1  88           	dey
000195r 1  B1 rr        	lda     (sp),y
000197r 1  A0 03        	ldy     #$03
000199r 1  91 rr        	sta     (ptr1),y
00019Br 1  C8           	iny
00019Cr 1  8A           	txa
00019Dr 1  91 rr        	sta     (ptr1),y
00019Fr 1  A0 02        	ldy     #$02
0001A1r 1  B1 rr        	lda     (sp),y
0001A3r 1  85 rr        	sta     ptr1+1
0001A5r 1  88           	dey
0001A6r 1  B1 rr        	lda     (sp),y
0001A8r 1  85 rr        	sta     ptr1
0001AAr 1  A0 06        	ldy     #$06
0001ACr 1  B1 rr        	lda     (sp),y
0001AEr 1  88           	dey
0001AFr 1  91 rr        	sta     (ptr1),y
0001B1r 1  A0 02        	ldy     #$02
0001B3r 1  B1 rr        	lda     (sp),y
0001B5r 1  85 rr        	sta     ptr1+1
0001B7r 1  88           	dey
0001B8r 1  B1 rr        	lda     (sp),y
0001BAr 1  85 rr        	sta     ptr1
0001BCr 1  A0 05        	ldy     #$05
0001BEr 1  B1 rr        	lda     (sp),y
0001C0r 1  C8           	iny
0001C1r 1  91 rr        	sta     (ptr1),y
0001C3r 1  A0 04        	ldy     #$04
0001C5r 1  B1 rr        	lda     (sp),y
0001C7r 1  85 rr        	sta     ptr1+1
0001C9r 1  88           	dey
0001CAr 1  B1 rr        	lda     (sp),y
0001CCr 1  85 rr        	sta     ptr1
0001CEr 1  A0 00        	ldy     #$00
0001D0r 1  B1 rr        	lda     (ptr1),y
0001D2r 1  91 rr        	sta     (sp),y
0001D4r 1  A0 0B        	ldy     #$0B
0001D6r 1  4C rr rr     	jmp     addysp
0001D9r 1               
0001D9r 1               .endproc
0001D9r 1               
0001D9r 1               ; ---------------------------------------------------------------
0001D9r 1               ; int __near__ main (void)
0001D9r 1               ; ---------------------------------------------------------------
0001D9r 1               
0001D9r 1               .segment	"CODE"
0001D9r 1               
0001D9r 1               .proc	_main: near
0001D9r 1               
0001D9r 1               .segment	"CODE"
0001D9r 1               
0001D9r 1  20 rr rr     	jsr     decsp3
0001DCr 1  A2 F1        	ldx     #$F1
0001DEr 1  A9 0B        	lda     #$0B
0001E0r 1  20 rr rr     	jsr     pushax
0001E3r 1  20 rr rr     	jsr     decsp1
0001E6r 1  A9 01        	lda     #$01
0001E8r 1  A0 00        	ldy     #$00
0001EAr 1  91 rr        	sta     (sp),y
0001ECr 1  98           	tya
0001EDr 1  A0 05        	ldy     #$05
0001EFr 1  91 rr        	sta     (sp),y
0001F1r 1  A0 03        	ldy     #$03
0001F3r 1  91 rr        	sta     (sp),y
0001F5r 1  C8           	iny
0001F6r 1  91 rr        	sta     (sp),y
0001F8r 1  A9 03        	lda     #$03
0001FAr 1  20 rr rr     L0070:	jsr     _change_palette
0001FDr 1  A0 05        L0051:	ldy     #$05
0001FFr 1  B1 rr        L0072:	lda     (sp),y
000201r 1  48           	pha
000202r 1  38           	sec
000203r 1  E9 01        	sbc     #$01
000205r 1  91 rr        	sta     (sp),y
000207r 1  68           	pla
000208r 1  D0 F5        	bne     L0072
00020Ar 1  A0 04        	ldy     #$04
00020Cr 1  B1 rr        	lda     (sp),y
00020Er 1  18           	clc
00020Fr 1  69 01        	adc     #$01
000211r 1  91 rr        	sta     (sp),y
000213r 1  A0 02        	ldy     #$02
000215r 1  B1 rr        	lda     (sp),y
000217r 1  AA           	tax
000218r 1  88           	dey
000219r 1  B1 rr        	lda     (sp),y
00021Br 1  18           	clc
00021Cr 1  69 90        	adc     #$90
00021Er 1  90 01        	bcc     L005B
000220r 1  E8           	inx
000221r 1  E8           L005B:	inx
000222r 1  85 rr        	sta     ptr1
000224r 1  86 rr        	stx     ptr1+1
000226r 1  A0 04        	ldy     #$04
000228r 1  B1 rr        	lda     (sp),y
00022Ar 1  18           	clc
00022Br 1  65 rr        	adc     ptr1
00022Dr 1  A6 rr        	ldx     ptr1+1
00022Fr 1  90 01        	bcc     L006E
000231r 1  E8           	inx
000232r 1  85 rr        L006E:	sta     ptr1
000234r 1  86 rr        	stx     ptr1+1
000236r 1  88           	dey
000237r 1  B1 rr        	lda     (sp),y
000239r 1  18           	clc
00023Ar 1  C8           	iny
00023Br 1  71 rr        	adc     (sp),y
00023Dr 1  A0 00        	ldy     #$00
00023Fr 1  91 rr        	sta     (ptr1),y
000241r 1  A0 03        	ldy     #$03
000243r 1  B1 rr        	lda     (sp),y
000245r 1  C9 64        	cmp     #$64
000247r 1  90 04        	bcc     L005D
000249r 1  A9 00        	lda     #$00
00024Br 1  91 rr        	sta     (sp),y
00024Dr 1  C8           L005D:	iny
00024Er 1  B1 rr        	lda     (sp),y
000250r 1  D0 AB        	bne     L0051
000252r 1  88           	dey
000253r 1  B1 rr        	lda     (sp),y
000255r 1  18           	clc
000256r 1  69 01        	adc     #$01
000258r 1  91 rr        	sta     (sp),y
00025Ar 1  A0 00        	ldy     #$00
00025Cr 1  B1 rr        	lda     (sp),y
00025Er 1  C9 03        	cmp     #$03
000260r 1  D0 05        	bne     L0073
000262r 1  A9 01        	lda     #$01
000264r 1  4C rr rr     	jmp     L0075
000267r 1  A9 03        L0073:	lda     #$03
000269r 1  91 rr        L0075:	sta     (sp),y
00026Br 1  4C rr rr     	jmp     L0070
00026Er 1               
00026Er 1               .endproc
00026Er 1               
00026Er 1               
